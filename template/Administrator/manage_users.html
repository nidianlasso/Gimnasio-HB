<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion Usuarios</title>
    <link rel="stylesheet" type="text/css" href="..\static\CSS\style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
        crossorigin="anonymous">
</head>


<body class="admin_fondo">
    {% include 'Administrator/menu.html' %}

    <main>
        <div>
            <h3 class="edit_perfil" style="text-align: center; color: #000; padding: 3%;"> <b>GESTIÓN DE USUARIOS</b> </h3>
            <div class="form-group" style="display: inline-flex;">

                <!-- Botón para ir a la lista de usuarios -->
                <button onclick="getListUsers()" class="btn btn-warning btn-block"
                    id="listadomiembro">Listado Usuarios</button>

                <!-- Botón para ir a la página de añadir usuario -->
                <a style="margin-left: 10px;" href="{{ url_for('add_users') }}" class="btn btn-warning btn-block" id="AñadirUsuario">Añadir
                    Miembro</a>

                <!-- Botón para ir a la página de Buscar usuario -->
                <a style="margin-left: 10px;" href="#" class="btn btn-warning btn-block" id="BuscarMiembro">Buscar
                    Miembro</a>

                <!-- Botón para ir a la página de Editar usuario -->
                <a style="margin-left: 10px;" href="#" class="btn btn-warning btn-block" id="EditarMiembro">Editar
                    Miembro</a>
                <br>
                <br>
                <!-- Botón para ir a la página de estado usuario -->
                <a style="margin-left: 10px;" href="#" class="btn btn-warning btn-block" id="EstadoUsuario">Estado de
                    Miembros</a>

            </div>
        </div>


        <table border="1" id="miembrosTabla">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Edad</th>
                <th>Correo</th>
              </tr>
            </thead>
            <tbody>
              <!-- Las filas se agregarán dinámicamente aquí -->
            </tbody>
          </table>

        </div>
        </div>
    </main>
</body>

<script>
    
    function getListUsers() {

        const tablaCuerpo = document.querySelector('#miembrosTabla tbody');
        tablaCuerpo.innerHTML = '';
        fetch('/list-members')
            .then(response => {if (!response.ok) {throw new Error('Error en la solicitud');}return response.json();  // Parsear la respuesta a JSON
            })
            .then(data => {
                console.log(data); 
                data.forEach(user => {
                // Crear una fila
                const fila = document.createElement('tr');

                // Crear y agregar celdas a la fila
                const celdaId = document.createElement('td');
                celdaId.textContent = user[0];
                fila.appendChild(celdaId);

                const celdaNombre = document.createElement('td');
                celdaNombre.textContent = user[1];
                fila.appendChild(celdaNombre);

                const celdaEdad = document.createElement('td');
                celdaEdad.textContent = user[2];
                fila.appendChild(celdaEdad);

                const celdaCorreo = document.createElement('td');
                celdaCorreo.textContent = user[3];
                fila.appendChild(celdaCorreo);

                // Agregar la fila al cuerpo de la tabla
                tablaCuerpo.appendChild(fila);
            });
            })
            .catch(error => {
                console.error('Hubo un problema con la solicitud:', error);
            });

    } 
</script>

</html>